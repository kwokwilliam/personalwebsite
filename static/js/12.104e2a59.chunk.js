(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{261:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(251),o=a(0),r=a.n(o),s=a(257),l=a(279),i=a(262),u=a.n(i);function c(e){var t=e.locations,a=e.setLocation,i=e.student,c=Object(o.useState)({x:0,y:0,width:0,height:0,parentNodeOffsetLeft:0,parentNodeOffsetTop:0}),m=Object(n.a)(c,2),f=m[0],d=m[1],h=Object(o.useRef)(null),p=Object(o.useRef)(null);return Object(o.useEffect)(function(){var e=function(){if(h.current){var e=h.current,t=e.offsetLeft,a=e.offsetTop,n=e.width,o=e.height,r=e.parentNode,s=r.offsetLeft,l=r.offsetTop;d({x:t,y:a,width:n,height:o,parentNodeOffsetLeft:s,parentNodeOffsetTop:l})}};if(h.current&&0===f.x&&0===f.y||0===f.width||0===f.height||0===f.parentNodeOffsetLeft||0===f.parentNodeOffsetTop){var t=h.current,a=t.offsetLeft,n=t.offsetTop,o=t.width,r=t.height,s=t.parentNode,l=s.offsetLeft,i=s.offsetTop;d({x:a,y:n,width:o,height:r,parentNodeOffsetLeft:l,parentNodeOffsetTop:i})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),r.a.createElement("div",{ref:p,style:{position:"relative",height:"60%"}},r.a.createElement("img",{alt:"TE Lab Map. Please see one of the tutors if you need any accessibility accommodations and tutoring.",ref:h,src:u.a,style:{maxHeight:"50vh",maxWidth:"90vw",cursor:"pointer"},onClick:function(e){if(i&&a){var t=e.target,n=t.offsetLeft,o=t.offsetTop,r=t.width,s=t.height,l=e.target.parentNode.offsetLeft,u=e.target.parentNode.offsetTop,c={xPercentage:(e.pageX-n-l)/r,yPercentage:(e.pageY-o-u)/s};d({x:n,y:o,width:r,height:s,parentNodeOffsetLeft:l,parentNodeOffsetTop:u}),a(c)}}}),t&&t.map(function(e,t){return r.a.createElement("div",{key:"loc-"+t,style:{position:"absolute",left:f.x+(e?e.xPercentage*f.width:0),top:f.y+(e?e.yPercentage*f.height:0),transform:"translate(-50%, -50%)",display:e?"":"none"}},r.a.createElement(s.a,{icon:l.a,size:"2x",style:{color:"red"}}))}))}},262:function(e,t,a){e.exports=a.p+"static/media/TELabMap.a1bfce1d.png"},693:function(e,t,a){},695:function(e,t,a){},697:function(e,t,a){},770:function(e,t,a){"use strict";a.r(t);var n=a(247),o=a(249),r=a(16),s=a(17),l=a(19),i=a(18),u=a(20),c=a(0),m=a.n(c),f=a(42),d=a.n(f),h=a(248),p=a(246);a(693);function g(e){var t=e.getPageNumber,a=e.prevStep,n=e.nextStep,o=e.totalPages;return m.a.createElement("div",{style:{width:"100%",margin:"auto",marginTop:40,textAlign:"center",zIndex:-5}},m.a.createElement(h.Grid,{fluid:!0},m.a.createElement(h.Row,null,m.a.createElement(h.Col,{style:{width:"50%"}},m.a.createElement(p.b,{disabled:t()<1,style:{backgroundColor:"#005696"},onClick:a},"< Back")),m.a.createElement(h.Col,{style:{width:"50%"}},m.a.createElement(p.b,{disabled:t()>o-2,style:{backgroundColor:"#005696"},onClick:n},"Next >")))))}var b=a(251);a(695);function y(e){var t=e.name,a=e.data,n=e.change,o=e.initText,r=e.value,s=Object(c.useState)(!1),l=Object(b.a)(s,2),i=l[0],u=l[1];return m.a.createElement(p.k,{name:t,isOpen:i,toggle:function(){u(!i)}},m.a.createElement(p.n,{caret:!0,style:{zIndex:500,backgroundColor:"#005696"}},r||o),m.a.createElement(p.m,{onChange:function(){console.log("asdf")},style:{zIndex:500}},a.map(function(e){return m.a.createElement(p.l,{key:e,onClick:function(){return n({target:{name:t,value:e}})},style:{cursor:"pointer"}},e)})))}var v=a(33),E=a.n(v),S=a(261),T=a(12),w=a.n(T),O=(a(117),a(263),a(697),a(761));a.d(t,"default",function(){return C});var k=w.a.functions().httpsCallable("removeUserFromQueue"),C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).removeMeFromQueue=function(){a.setState({removeButtonLoading:!0}),k({id:a.id}).then(function(e){a.setState({removeButtonLoading:!1,page:0}),e.data.success||(console.log(e.data),a.setState({error:e.data.error}))})},a.renderAnnouncements=function(e){var t=d.a.get("tutorqannouncementsseen")?JSON.parse(d.a.get("tutorqannouncementsseen")):[],a=Object(o.a)({},e);t.forEach(function(e){delete a[e]}),console.log(t);var n=Date.now();Object.keys(a).forEach(function(e){n-a[e].timestamp<864e5&&alert(a[e].body),t.push(e)}),d.a.set("tutorqannouncementsseen",JSON.stringify(t))},a.componentDidMount=function(){a.idToQueueInfoRef=w.a.database().ref("/tutorq/idToQueueInfo/".concat(a.id)),a.idToQueueInfoRef.on("value",function(e){var t=(e.val()||{}).queueKey;a.setState({userInQueueKey:t})}),a.announcementRef=w.a.database().ref("/tutorq/announcements"),a.announcementRef.on("value",function(e){var t=e.val()||{},n={};Object.keys(t).forEach(function(e){n[t[e].id]=t[e]}),a.renderAnnouncements(n)}),a.queueRef=w.a.database().ref("/tutorq/inqueue"),a.queueRef.on("value",function(e){var t=e.val()||{},n=Object.keys(t).sort(function(e,a){return t[e].timestamp-t[a].timestamp}),o=n.indexOf(a.state.userInQueueKey);o>-1?a.setState({inQueue:!0,queueLength:n.length,positionInQueue:o+1,sentToFirebase:!1}):a.setState({inQueue:!1,queueLength:n.length,positionInQueue:-1})})},a.componentWillUnmount=function(){a.queueRef.off(),a.idToQueueInfoRef.off(),a.announcementRef.off()},a.change=function(e){var t,o=e.target,r=o.name,s=o.value;"classNumber"===r&&s!==a.state.classNumber?a.setState((t={},Object(n.a)(t,r,s),Object(n.a)(t,"problemCategory",null),Object(n.a)(t,"problemDescription",""),t)):a.setState(Object(n.a)({},r,s))},a.getPageNumber=function(){return a.state.page},a.nextStep=function(){var e=a.state.page+1;e>a.totalPages-1&&(e=a.totalPages),a.setState({page:e}),e===a.totalPages-1&&a.checkValidityBeforeSendingToFirebase()},a.prevStep=function(){var e=a.state.page-1;e<0&&(e=0),a.setState({page:e})},a.setLocation=function(e){a.setState({location:e})},a.setValid=function(e){a.setState({valid:e})},a.sendDataToFirebase=function(){if(a.checkValidityBeforeSendingToFirebase()){var e=a.state,t=e.name,n=e.classNumber,o=e.problemCategory,r=e.problemDescription,s=e.location;d.a.set("tutorqname",t),d.a.set("tutorqclassnumber",n.toString());var l=a.queueRef.push({classNumber:n,problemCategory:o,problemDescription:r,location:s,timestamp:w.a.database.ServerValue.TIMESTAMP},function(e){e&&a.setError(e.message)}).key;l&&w.a.database().ref("/tutorq/idToQueueInfo/".concat(a.id)).set({name:t,queueKey:l})}},a.state={page:0,name:d.a.get("tutorqname")||"",classNumber:d.a.get("tutorqclassnumber")?Number(d.a.get("tutorqclassnumber")):null,problemCategory:null,problemDescription:"",location:null,error:"",valid:!1,queueLength:0,positionInQueue:-1,inQueue:!1,userInQueueKey:"",sentToFirebase:!1},a.totalPages=5,a.classes=[201,330,340],a.topics={201:["Setup","Markdown","Git/web servers","R","dplyr","Web APIs","R Markdown","ggplot2","R Shiny","Other"],330:["ERDs and MetaData","Create table","Constraints","Inserting data","Views, Functions, Stored procedures","Permissions","Testing","Other"],340:["Setup","HTML","CSS Fundamentals","CSS Selectors","CSS Layouting","Responsive CSS","CSS Frameworks","Basic JavaScript","jQuery","DOM","AJAX/Fetch","React","Routing","Firebase","Testing","Other"]},a.id=d.a.get("id"),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"setError",value:function(e){this.setState({error:e})}},{key:"checkValidityBeforeSendingToFirebase",value:function(){return""===this.state.name?(this.setError("Please provide a valid name"),this.setValid(!1),!1):null===this.state.classNumber?(this.setError("Invalid class number provided"),this.setValid(!1),!1):null===this.state.problemCategory?(this.setError("Please choose a problem category"),this.setValid(!1),!1):""===this.state.problemDescription?(this.setError("Please provide a description of the problem"),this.setValid(!1),!1):null===this.state.location?(this.setError("Please provide your location in the TE lab"),this.setValid(!1),!1):(this.setError(""),this.setValid(!0),!0)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.classNumber,n=e.page,o=e.problemCategory,r=e.problemDescription,s=e.location,l=e.error,i=e.valid,u=e.positionInQueue,c=e.queueLength,f=[];return f.push(s),m.a.createElement(m.a.Fragment,null,m.a.createElement("h1",{style:{margin:"auto",textAlign:"center"}},"TutorQ"),this.state.inQueue&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{marginTop:"10vh",textAlign:"center"}},m.a.createElement("h3",{style:{fontWeight:"bold"}},"You are currently in queue at position: ",m.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},u,"/",c)),m.a.createElement("div",{style:{fontSize:"150%"}},m.a.createElement("p",null,"Please be patient, a tutor will assist you shortly."),m.a.createElement("p",null,"In the meantime, please check out the ",m.a.createElement(O.a,{to:"/blog/infotutor-home"},"Tutor Hub"),". Don't worry, your place in line will be saved!"),m.a.createElement("p",null,"If you would like to remove yourself from the queue, please click the button below:"),m.a.createElement(p.b,{style:{backgroundColor:"#005696"},onClick:this.removeMeFromQueue,disabled:this.state.removeButtonLoading},"Remove me from queue")))),!this.state.inQueue&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{textAlign:"center"}},"Page ",n+1,"/",this.totalPages),m.a.createElement("div",{style:{marginTop:"10vh",textAlign:"center"}},0===n&&m.a.createElement(E.a,null,m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Welcome to TutorQ!"),m.a.createElement("p",null,"This is an application used for the INFO tutor. Please have cookies enabled or the application will not function properly. Your data will be collected. See how it is being used ",m.a.createElement(O.a,{to:"/blog/tutordata"},"here"),"."),m.a.createElement("h3",null,"Please enter your name"),m.a.createElement(p.o,{placeholder:"Name",name:"name",onChange:this.change,value:t,style:{maxWidth:500,margin:"auto",marginTop:10}}))),1===n&&m.a.createElement(E.a,null,m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Please select your class"),m.a.createElement(y,{change:this.change,name:"classNumber",data:this.classes,initText:"Choose a class",value:a}))),2===n&&m.a.createElement(E.a,null,a?m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Please select a topic"),m.a.createElement(y,{change:this.change,name:"problemCategory",data:this.topics[a],initText:"Choose a topic",value:o}),m.a.createElement("h3",{style:{marginTop:15}},"Please describe your problem"),m.a.createElement(p.o,{placeholder:"Problem",name:"problemDescription",onChange:this.change,value:r,style:{maxWidth:500,margin:"auto",marginTop:30}})):m.a.createElement("h3",null,"Please select a class on the previous page")),3===n&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Where in the TE Lab are you sitting?"),m.a.createElement("div",null,m.a.createElement(S.a,{student:!0,setLocation:this.setLocation,locations:f,test:"123"}))),4===n&&m.a.createElement(E.a,null,m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Submit"),""!==l&&m.a.createElement(p.a,{color:"danger"},l),m.a.createElement(p.b,{style:{backgroundColor:"#005696"},disabled:!i,onClick:this.sendDataToFirebase},"Join the queue!"),m.a.createElement("p",{style:{marginTop:15}},"By clicking this button, you acknowledge that your data is collected. See how your data is being used ",m.a.createElement(O.a,{to:"/blog/tutordata"},"here"))))),m.a.createElement(g,{getPageNumber:this.getPageNumber,prevStep:this.prevStep,nextStep:this.nextStep,totalPages:this.totalPages})))}}]),t}(c.Component)}}]);
//# sourceMappingURL=12.104e2a59.chunk.js.map