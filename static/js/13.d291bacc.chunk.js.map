{"version":3,"sources":["components/Pages/TutorQ/Admin/TutorQAdmin.js"],"names":["Loading","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react_loader_spinner__WEBPACK_IMPORTED_MODULE_9___default","type","color","height","width","TutorQAdminMain","Loadable","loader","__webpack_require__","e","then","bind","loading","TutorQAdminWhoIsInQueue","TutorQAdminAdminQueue","Promise","all","TutorQAdminSeatingDistribution","provider","firebase","auth","GoogleAuthProvider","isUserAdmin","functions","httpsCallable","TutorQAdmin","props","_this","Object","D_Files_JobRelated_personalwebsite_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_Files_JobRelated_personalwebsite_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_Files_JobRelated_personalwebsite_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","user","admin","adminButtons","linkTo","linkText","_this2","onAuthStateChanged","r","data","setState","_this3","_this$state","style","textAlign","marginBottom","reactstrap__WEBPACK_IMPORTED_MODULE_7__","onClick","signInWithRedirect","backgroundColor","Fragment","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","exact","path","render","uid","signOut","Component"],"mappings":"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","file":"static/js/13.d291bacc.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport firebase from 'firebase/app';\r\nimport { Button } from 'reactstrap';\r\nimport { Route } from 'react-router-dom';\r\nimport Spinner from 'react-loader-spinner';\r\nimport 'firebase/auth';\r\nimport 'firebase/functions';\r\nimport Loadable from 'react-loadable';\r\n\r\nconst Loading = () => <div><Spinner\r\n    type=\"Oval\"\r\n    color=\"#005696\"\r\n    height=\"100\"\r\n    width=\"100\"\r\n/></div>;\r\n\r\nconst TutorQAdminMain = Loadable({\r\n    loader: () => import('./Components/Main/TutorQAdminMain'),\r\n    loading: Loading,\r\n});\r\n\r\nconst TutorQAdminWhoIsInQueue = Loadable({\r\n    loader: () => import('./Components/WhoInQueue/TutorQAdminWhoIsInQueue'),\r\n    loading: Loading,\r\n});\r\n\r\nconst TutorQAdminAdminQueue = Loadable({\r\n    loader: () => import('./Components/AdminQueue/TutorQAdminAdminQueue'),\r\n    loading: Loading,\r\n});\r\n\r\nconst TutorQAdminSeatingDistribution = Loadable({\r\n    loader: () => import('./Components/SeatingDistribution/TutorQAdminSeatingDistribution'),\r\n    loading: Loading,\r\n});\r\n\r\nlet provider = new firebase.auth.GoogleAuthProvider();\r\nconst isUserAdmin = firebase.functions().httpsCallable('isUserAdmin');\r\n\r\nexport default class TutorQAdmin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: null,\r\n            loading: true,\r\n            admin: false\r\n        }\r\n\r\n        this.adminButtons = [\r\n            {\r\n                linkTo: \"/tutorqadmin/adminqueue\",\r\n                linkText: \"Main Admin Tool\"\r\n            },\r\n            {\r\n                linkTo: \"/tutorqadmin/whosinqueue\",\r\n                linkText: \"See Queue List\"\r\n            },\r\n            {\r\n                linkTo: \"/tutorqadmin/seatingdistribution\",\r\n                linkText: \"Seating Distribution\"\r\n            },\r\n            // {\r\n            //     linkTo: \"/tutorqadmin/statistics\",\r\n            //     linkText: \"Tutor Statistics\"\r\n            // }\r\n        ]\r\n    }\r\n\r\n    componentWillMount() {\r\n        firebase.auth().onAuthStateChanged(user => {\r\n            if (user) {\r\n                isUserAdmin().then(r => {\r\n                    if (r.data) {\r\n                        this.setState({ admin: true, user, loading: false });\r\n                    } else {\r\n                        this.setState({ admin: false, user, loading: false });\r\n                    }\r\n                })\r\n            } else {\r\n                this.setState({ user: null, loading: false });\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { loading, user, admin } = this.state;\r\n        return <div style={{ textAlign: 'center' }}>\r\n            <h1 style={{ marginBottom: '5vh' }}>\r\n                TutorQ Admin Panel\r\n            </h1>\r\n\r\n            {loading && <Loading />}\r\n\r\n            {!loading && !user && <div>\r\n                <Button onClick={() => {\r\n                    firebase.auth().signInWithRedirect(provider);\r\n                }} style={{ backgroundColor: \"#005696\" }}>Sign in with Google</Button>\r\n            </div>}\r\n\r\n            {user && admin && <>\r\n                <Route exact path={\"/tutorqadmin\"} render={() => <TutorQAdminMain adminButtons={this.adminButtons} />} />\r\n                <Route path={\"/tutorqadmin/adminqueue\"} render={() => <TutorQAdminAdminQueue uid={user.uid} />} />\r\n                <Route path={\"/tutorqadmin/whosinqueue\"} render={() => <TutorQAdminWhoIsInQueue />} />\r\n                <Route path={\"/tutorqadmin/seatingdistribution\"} render={() => <TutorQAdminSeatingDistribution />} />\r\n            </>}\r\n\r\n            {user && !admin && <>\r\n                <h1>You are not permitted to view this page.</h1>\r\n                <Button onClick={() => {\r\n                    firebase.auth().signOut();\r\n                }}>\r\n                    Sign out\r\n                </Button>\r\n            </>}\r\n        </div>\r\n    }\r\n}\r\n\r\n// TODO: CONCURRENCY AND SLOW INTERNET"],"sourceRoot":""}