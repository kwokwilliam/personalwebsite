(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{319:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return a})},320:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(319);function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Object(a.a)(e,t,n[t])})}return e}},330:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(322),r=n(0),o=n.n(r),i=n(325),s=n(356),u=n(331),c=n.n(u);function l(e){var t=e.locations,n=e.setLocation,u=e.student,l=Object(r.useState)({x:0,y:0,width:0,height:0,parentNodeOffsetLeft:0,parentNodeOffsetTop:0}),d=Object(a.a)(l,2),f=d[0],p=d[1],h=Object(r.useRef)(null),m=Object(r.useRef)(null);return Object(r.useEffect)(function(){var e=function(){if(h.current){var e=h.current,t=e.offsetLeft,n=e.offsetTop,a=e.width,r=e.height,o=e.parentNode,i=o.offsetLeft,s=o.offsetTop;p({x:t,y:n,width:a,height:r,parentNodeOffsetLeft:i,parentNodeOffsetTop:s})}};if(h.current&&0===f.x&&0===f.y||0===f.width||0===f.height||0===f.parentNodeOffsetLeft||0===f.parentNodeOffsetTop){var t=h.current,n=t.offsetLeft,a=t.offsetTop,r=t.width,o=t.height,i=t.parentNode,s=i.offsetLeft,u=i.offsetTop;p({x:n,y:a,width:r,height:o,parentNodeOffsetLeft:s,parentNodeOffsetTop:u})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),o.a.createElement("div",{ref:m,style:{position:"relative",height:"60%"}},o.a.createElement("img",{alt:"TE Lab Map. Please see one of the tutors if you need any accessibility accommodations and tutoring.",ref:h,src:c.a,style:{maxHeight:"50vh",maxWidth:"90vw",cursor:"pointer"},onClick:function(e){if(u&&n){var t=e.target,a=t.offsetLeft,r=t.offsetTop,o=t.width,i=t.height,s=e.target.parentNode.offsetLeft,c=e.target.parentNode.offsetTop,l={xPercentage:(e.pageX-a-s)/o,yPercentage:(e.pageY-r-c)/i};p({x:a,y:r,width:o,height:i,parentNodeOffsetLeft:s,parentNodeOffsetTop:c}),n(l)}}}),t&&t.map(function(e,t){return o.a.createElement("div",{key:"loc-"+t,style:{position:"absolute",left:f.x+(e?e.xPercentage*f.width:0),top:f.y+(e?e.yPercentage*f.height:0),transform:"translate(-50%, -50%)",display:e?"":"none"}},o.a.createElement(i.a,{icon:s.a,size:"2x",style:{color:"red"}}))}))}},331:function(e,t,n){e.exports=n.p+"static/media/TELabMap.a1bfce1d.png"},332:function(e,t,n){"use strict";n(357)},357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=(a=n(89))&&"object"===typeof a&&"default"in a?a.default:a,o=n(90),i={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},s=function(e){function t(n,a,r){var o=e.call(this,a)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=r,o}return o.__extends(t,e),t}(Error);var u=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(e=t.sent())?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t;return o.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}();function c(e,t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=t(e[a]));return n}var l=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null===e||void 0===e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"===typeof e||"object"===typeof e)return c(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null===e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=parseFloat(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"===typeof e||"object"===typeof e?c(e,function(e){return t.decode(e)}):e},e}();var d=function(){function e(e,t){void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new l,this.emulatorOrigin=null,this.contextProvider=new u(e)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+n+"/"+e:"https://"+n+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(a){return n.call(e,a,t||{})}},e.prototype.postJSON=function(e,t,n){return o.__awaiter(this,void 0,void 0,function(){var a,r;return o.__generator(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return a=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:r=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return r=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:a.status,json:r}]}})})},e.prototype.call=function(e,t,n){return o.__awaiter(this,void 0,void 0,function(){var a,r,u,c,l,d,f,p;return o.__generator(this,function(o){switch(o.label){case 0:return a=this._url(e),t=this.serializer.encode(t),r={data:t},u=new Headers,[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&u.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&u.append("Firebase-Instance-ID-Token",c.instanceIdToken),l=n.timeout||7e4,[4,Promise.race([this.postJSON(a,r,u),(h=l,new Promise(function(e,t){setTimeout(function(){t(new s("deadline-exceeded","deadline-exceeded"))},h)}))])];case 2:if(d=o.sent(),f=function(e,t,n){var a=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),r=a,o=void 0;try{var u=t.error;if(u){var c=u.status;if("string"===typeof c){if(!i[c])return new s("internal","internal");a=i[c]}r=c;var l=u.message;"string"===typeof l&&(r=l),void 0!==(o=u.details)&&(o=n.decode(o))}}catch(d){}return"ok"===a?null:new s(a,r,o)}(d.status,d.json,this.serializer))throw f;if(!d.json)throw new s("internal","Response is not valid JSON object.");if("undefined"===typeof(p=d.json.data)&&(p=d.json.result),"undefined"===typeof p)throw new s("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}var h})})},e}(),f="functions";function p(e,t,n){return new d(e,n)}function h(e){var t={Functions:d};e.INTERNAL.registerService(f,p,t,void 0,!0)}h(r),t.registerFunctions=h},775:function(e,t,n){},776:function(e,t,n){},777:function(e,t,n){},842:function(e,t,n){"use strict";n.r(t);var a=n(319),r=n(320),o=n(25),i=n(26),s=n(28),u=n(27),c=n(29),l=n(0),d=n.n(l),f=n(61),p=n.n(f),h=n(324),m=n(318);n(775);function g(e){var t=e.getPageNumber,n=e.prevStep,a=e.nextStep,r=e.totalPages;return d.a.createElement("div",{style:{width:"100%",margin:"auto",marginTop:40,textAlign:"center",zIndex:-5}},d.a.createElement(h.Grid,{fluid:!0},d.a.createElement(h.Row,null,d.a.createElement(h.Col,{style:{width:"50%"}},d.a.createElement(m.b,{disabled:t()<1,style:{backgroundColor:"#005696"},onClick:n},"< Back")),d.a.createElement(h.Col,{style:{width:"50%"}},d.a.createElement(m.b,{disabled:t()>r-2,style:{backgroundColor:"#005696"},onClick:a},"Next >")))))}var b=n(322);n(776);function v(e){var t=e.name,n=e.data,a=e.change,r=e.initText,o=e.value,i=Object(l.useState)(!1),s=Object(b.a)(i,2),u=s[0],c=s[1];return d.a.createElement(m.k,{name:t,isOpen:u,toggle:function(){c(!u)}},d.a.createElement(m.n,{caret:!0,style:{zIndex:500,backgroundColor:"#005696"}},o||r),d.a.createElement(m.m,{onChange:function(){console.log("asdf")},style:{zIndex:500}},n.map(function(e){return d.a.createElement(m.l,{key:e,onClick:function(){return a({target:{name:t,value:e}})},style:{cursor:"pointer"}},e)})))}var y=n(323),E=n.n(y),O=n(330),w=n(12),T=n.n(w),S=(n(154),n(332),n(777),n(312));n.d(t,"default",function(){return k});var N=T.a.functions().httpsCallable("removeUserFromQueue"),k=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).removeMeFromQueue=function(){n.setState({removeButtonLoading:!0}),N({id:n.id}).then(function(e){n.setState({removeButtonLoading:!1,page:0}),e.data.success||(console.log(e.data),n.setState({error:e.data.error}))})},n.renderAnnouncements=function(e){var t=p.a.get("tutorqannouncementsseen")?JSON.parse(p.a.get("tutorqannouncementsseen")):[],n=Object(r.a)({},e);t.forEach(function(e){delete n[e]});var a=Date.now();Object.keys(n).forEach(function(e){a-n[e].timestamp<864e5&&alert(n[e].body),t.push(e)}),p.a.set("tutorqannouncementsseen",JSON.stringify(t))},n.componentDidMount=function(){n.idToQueueInfoRef=T.a.database().ref("/tutorq/idToQueueInfo/".concat(n.id)),n.idToQueueInfoRef.on("value",function(e){var t=(e.val()||{}).queueKey;n.setState({userInQueueKey:t})}),n.announcementRef=T.a.database().ref("/tutorq/announcements"),n.announcementRef.on("value",function(e){var t=e.val()||{},a={};Object.keys(t).forEach(function(e){a[t[e].id]=t[e]}),n.renderAnnouncements(a)}),n.queueRef=T.a.database().ref("/tutorq/inqueue"),n.queueRef.on("value",function(e){var t=e.val()||{},a=Object.keys(t).sort(function(e,n){return t[e].timestamp-t[n].timestamp}),r=a.indexOf(n.state.userInQueueKey);r>-1?n.setState({inQueue:!0,queueLength:a.length,positionInQueue:r+1,sentToFirebase:!1}):n.setState({inQueue:!1,queueLength:a.length,positionInQueue:-1})})},n.componentWillUnmount=function(){n.queueRef.off(),n.idToQueueInfoRef.off(),n.announcementRef.off()},n.change=function(e){var t,r=e.target,o=r.name,i=r.value;"classNumber"===o&&i!==n.state.classNumber?n.setState((t={},Object(a.a)(t,o,i),Object(a.a)(t,"problemCategory",null),Object(a.a)(t,"problemDescription",""),t)):n.setState(Object(a.a)({},o,i))},n.getPageNumber=function(){return n.state.page},n.nextStep=function(){var e=n.state.page+1;e>n.totalPages-1&&(e=n.totalPages),n.setState({page:e}),e===n.totalPages-1&&n.checkValidityBeforeSendingToFirebase()},n.prevStep=function(){var e=n.state.page-1;e<0&&(e=0),n.setState({page:e})},n.setLocation=function(e){n.setState({location:e})},n.setValid=function(e){n.setState({valid:e})},n.sendDataToFirebase=function(){if(n.checkValidityBeforeSendingToFirebase()){var e=n.state,t=e.name,a=e.classNumber,r=e.problemCategory,o=e.problemDescription,i=e.location;p.a.set("tutorqname",t),p.a.set("tutorqclassnumber",a.toString());var s=n.queueRef.push({classNumber:a,problemCategory:r,problemDescription:o,location:i,timestamp:T.a.database.ServerValue.TIMESTAMP},function(e){e&&n.setError(e.message)}).key;s&&T.a.database().ref("/tutorq/idToQueueInfo/".concat(n.id)).set({name:t,queueKey:s})}},n.state={page:0,name:p.a.get("tutorqname")||"",classNumber:p.a.get("tutorqclassnumber")?Number(p.a.get("tutorqclassnumber")):null,problemCategory:null,problemDescription:"",location:null,error:"",valid:!1,queueLength:0,positionInQueue:-1,inQueue:!1,userInQueueKey:"",sentToFirebase:!1},n.totalPages=5,n.classes=[201,330,340],n.topics={201:["Setup","Markdown","Git/web servers","R","dplyr","Web APIs","R Markdown","ggplot2","R Shiny","Other"],330:["ERDs and MetaData","Create table","Constraints","Inserting data","Views, Functions, Stored procedures","Permissions","Testing","Other"],340:["Setup","HTML","CSS Fundamentals","CSS Selectors","CSS Layouting","Responsive CSS","CSS Frameworks","Basic JavaScript","jQuery","DOM","AJAX/Fetch","React","Routing","Firebase","Testing","Other"]},n.id=p.a.get("id"),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"setError",value:function(e){this.setState({error:e})}},{key:"checkValidityBeforeSendingToFirebase",value:function(){return""===this.state.name?(this.setError("Please provide a valid name"),this.setValid(!1),!1):null===this.state.classNumber?(this.setError("Invalid class number provided"),this.setValid(!1),!1):null===this.state.problemCategory?(this.setError("Please choose a problem category"),this.setValid(!1),!1):""===this.state.problemDescription?(this.setError("Please provide a description of the problem"),this.setValid(!1),!1):null===this.state.location?(this.setError("Please provide your location in the TE lab"),this.setValid(!1),!1):(this.setError(""),this.setValid(!0),!0)}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.classNumber,a=e.page,r=e.problemCategory,o=e.problemDescription,i=e.location,s=e.error,u=e.valid,c=e.positionInQueue,l=e.queueLength,f=[];return f.push(i),d.a.createElement(d.a.Fragment,null,d.a.createElement("h1",{style:{margin:"auto",textAlign:"center"}},"TutorQ"),this.state.inQueue&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{marginTop:"10vh",textAlign:"center"}},d.a.createElement("h3",{style:{fontWeight:"bold"}},"You are currently in queue at position: ",d.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},c,"/",l)),d.a.createElement("div",{style:{fontSize:"150%"}},d.a.createElement("p",null,"Please be patient, a tutor will assist you shortly."),d.a.createElement("p",null,"In the meantime, please check out the ",d.a.createElement(S.a,{to:"/blog/infotutor-home"},"Tutor Hub"),". Don't worry, your place in line will be saved!"),d.a.createElement("p",null,"If you would like to remove yourself from the queue, please click the button below:"),d.a.createElement(m.b,{style:{backgroundColor:"#005696"},onClick:this.removeMeFromQueue,disabled:this.state.removeButtonLoading},"Remove me from queue")))),!this.state.inQueue&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{textAlign:"center"}},"Page ",a+1,"/",this.totalPages),d.a.createElement("div",{style:{marginTop:"10vh",textAlign:"center"}},0===a&&d.a.createElement(E.a,null,d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Welcome to TutorQ!"),d.a.createElement("p",null,"This is an application used for the INFO tutor. Please have cookies enabled or the application will not function properly. Your data will be collected. See how it is being used ",d.a.createElement(S.a,{to:"/blog/tutordata"},"here"),"."),d.a.createElement("h3",null,"Please enter your name"),d.a.createElement(m.o,{placeholder:"Name",name:"name",onChange:this.change,value:t,style:{maxWidth:500,margin:"auto",marginTop:10}}))),1===a&&d.a.createElement(E.a,null,d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Please select your class"),d.a.createElement(v,{change:this.change,name:"classNumber",data:this.classes,initText:"Choose a class",value:n}))),2===a&&d.a.createElement(E.a,null,n?d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Please select a topic"),d.a.createElement(v,{change:this.change,name:"problemCategory",data:this.topics[n],initText:"Choose a topic",value:r}),d.a.createElement("h3",{style:{marginTop:15}},"Please describe your problem"),d.a.createElement(m.o,{placeholder:"Problem",name:"problemDescription",onChange:this.change,value:o,style:{maxWidth:500,margin:"auto",marginTop:30}})):d.a.createElement("h3",null,"Please select a class on the previous page")),3===a&&d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Where in the TE Lab are you sitting?"),d.a.createElement("div",null,d.a.createElement(O.a,{student:!0,setLocation:this.setLocation,locations:f,test:"123"}))),4===a&&d.a.createElement(E.a,null,d.a.createElement(d.a.Fragment,null,d.a.createElement("h3",null,"Submit"),""!==s&&d.a.createElement(m.a,{color:"danger"},s),d.a.createElement(m.b,{style:{backgroundColor:"#005696"},disabled:!u,onClick:this.sendDataToFirebase},"Join the queue!"),d.a.createElement("p",{style:{marginTop:15}},"By clicking this button, you acknowledge that your data is collected. See how your data is being used ",d.a.createElement(S.a,{to:"/blog/tutordata"},"here"))))),d.a.createElement(g,{getPageNumber:this.getPageNumber,prevStep:this.prevStep,nextStep:this.nextStep,totalPages:this.totalPages})))}}]),t}(l.Component)}}]);
//# sourceMappingURL=11.92d3c993.chunk.js.map