(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{258:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(257),o=n(0),i=n.n(o),l=n(255),r=n(276),s=n(259),c=n.n(s);function u(e){var t=e.locations,n=e.setLocation,s=e.student,u=Object(o.useState)({x:0,y:0,width:0,height:0,parentNodeOffsetLeft:0,parentNodeOffsetTop:0}),d=Object(a.a)(u,2),f=d[0],h=d[1],m=Object(o.useRef)(null),g=Object(o.useRef)(null);return Object(o.useEffect)(function(){var e=function(){if(m.current){var e=m.current,t=e.offsetLeft,n=e.offsetTop,a=e.width,o=e.height,i=e.parentNode,l=i.offsetLeft,r=i.offsetTop;h({x:t,y:n,width:a,height:o,parentNodeOffsetLeft:l,parentNodeOffsetTop:r})}};if(m.current&&0===f.x&&0===f.y||0===f.width||0===f.height||0===f.parentNodeOffsetLeft||0===f.parentNodeOffsetTop){var t=m.current,n=t.offsetLeft,a=t.offsetTop,o=t.width,i=t.height,l=t.parentNode,r=l.offsetLeft,s=l.offsetTop;h({x:n,y:a,width:o,height:i,parentNodeOffsetLeft:r,parentNodeOffsetTop:s})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),i.a.createElement("div",{ref:g,style:{position:"relative",height:"60%"}},i.a.createElement("img",{alt:"TE Lab Map. Please see one of the tutors if you need any accessibility accommodations and tutoring.",ref:m,src:c.a,style:{maxHeight:"50vh",maxWidth:"90vw",cursor:"pointer"},onClick:function(e){if(s&&n){var t=e.target,a=t.offsetLeft,o=t.offsetTop,i=t.width,l=t.height,r=e.target.parentNode.offsetLeft,c=e.target.parentNode.offsetTop,u={xPercentage:(e.pageX-a-r)/i,yPercentage:(e.pageY-o-c)/l};h({x:a,y:o,width:i,height:l,parentNodeOffsetLeft:r,parentNodeOffsetTop:c}),n(u)}}}),t&&t.map(function(e,t){return i.a.createElement("div",{key:"loc-"+t,style:{position:"absolute",left:f.x+(e?e.xPercentage*f.width:0),top:f.y+(e?e.yPercentage*f.height:0),transform:"translate(-50%, -50%)",display:e?"":"none"}},i.a.createElement(l.a,{icon:r.a,size:"2x",style:{color:"red"}}))}))}},259:function(e,t,n){e.exports=n.p+"static/media/TELabMap.97177b91.png"},261:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(0),o=n.n(a),i=n(734);function l(){return o.a.createElement("div",{style:{marginBottom:10}},o.a.createElement(i.a,{className:"btn",style:{textDecoration:"none",color:"white",backgroundColor:"#005696"},to:"/tutorqadmin"},"Back to admin hub"))}},730:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var a=n(16),o=n(17),i=n(19),l=n(18),r=n(20),s=n(0),c=n.n(s),u=n(12),d=n.n(u),f=(n(116),n(260),n(245)),h=n(295),m=n.n(h),g=n(261),p=n(258),b=function(){return c.a.createElement("div",null,c.a.createElement(m.a,{type:"Oval",color:"#005696",height:"100",width:"100"}))},E=d.a.functions().httpsCallable("giveTutorStudent"),v=d.a.functions().httpsCallable("finishTutorStudent"),y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).toggleFinishModal=function(){n.setState({confirmFinishModalOpen:!n.state.confirmFinishModalOpen})},n.toggleFinishAndNewStudentModal=function(){n.setState({confirmFinishAndGetNewStudentModalOpen:!n.state.confirmFinishAndGetNewStudentModalOpen})},n.state={currentStudent:null,lengthOfQueue:0,loading:!1,confirmFinishModalOpen:!1,confirmFinishAndGetNewStudentModalOpen:!1,uid:e.uid},n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.inprogressRef=d.a.database().ref("/tutorq/inprogress/".concat(this.state.uid)),this.inprogressRef.on("value",function(t){var n=t.val(),a=null;n&&(a=n),e.setState({loading:!1,currentStudent:a})}),this.queueRef=d.a.database().ref("/tutorq/inqueue"),this.queueRef.on("value",function(t){var n=t.val()||{},a=Object.keys(n).length;e.setState({lengthOfQueue:a})})}},{key:"componentWillUnmount",value:function(){this.inprogressRef.off(),this.queueRef.off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentStudent,a=t.loading,o=t.lengthOfQueue,i=t.confirmFinishModalOpen,l=t.confirmFinishAndGetNewStudentModalOpen,r=n||{},s=r.timestampJoinedQueue,u=r.name,d=r.classNumber,h=r.problemCategory,m=r.problemDescription,y=r.location,O=null;s&&(O=new Date(s));var w=[];return w.push(y),c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,null),a&&c.a.createElement(b,null),!a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{style:{marginBottom:50}},"Size of queue: ",o),n&&c.a.createElement("div",null,c.a.createElement(f.c,null,c.a.createElement(p.a,{student:!1,locations:w}),c.a.createElement(f.d,{style:{textAlign:"left"}},c.a.createElement(f.i,null,"Name: ",u),c.a.createElement(f.g,null,"Course: ",d," - ",h),c.a.createElement(f.h,null,"Submitted: ",O?O.toLocaleDateString():null," ",O?O.toLocaleTimeString():null),c.a.createElement(f.h,null,"Description: ",m),c.a.createElement("div",{style:{marginBottom:5}},c.a.createElement(f.b,{style:{backgroundColor:"#005696"},onClick:function(){e.setState({confirmFinishModalOpen:!0})}},"Finished")),c.a.createElement("div",null,c.a.createElement(f.b,{style:{backgroundColor:"#005696"},onClick:function(){e.setState({confirmFinishAndGetNewStudentModalOpen:!0})},disabled:o<=0},"Finished + Get New Student")))),c.a.createElement(f.p,{isOpen:i,toggle:this.toggleFinishModal},c.a.createElement(f.r,{toggle:this.toggleFinishModal},"Confirm finished?"),c.a.createElement(f.q,null,c.a.createElement(f.b,{style:{backgroundColor:"#005696"},onClick:function(){e.toggleFinishModal(),e.setState({loading:!0}),v()}},"Confirm")," ",c.a.createElement(f.b,{color:"secondary",onClick:this.toggleFinishModal},"Cancel"))),c.a.createElement(f.p,{isOpen:l,toggle:this.toggleFinishAndNewStudentModal},c.a.createElement(f.r,{toggle:this.toggleFinishAndNewStudentModal},"Confirm finished + get new student?"),c.a.createElement(f.q,null,c.a.createElement(f.b,{style:{backgroundColor:"#005696"},onClick:function(){e.toggleFinishAndNewStudentModal(),e.setState({loading:!0}),v().then(function(e){e.data.success&&E()})},disabled:o<=0},"Confirm")," ",c.a.createElement(f.b,{color:"secondary",onClick:this.toggleFinishAndNewStudentModal},"Cancel")))),!n&&c.a.createElement("div",null,c.a.createElement("div",{style:{marginBottom:10}},"You currently do not have a student."),c.a.createElement("div",null,c.a.createElement(f.b,{disabled:o<=0,style:{backgroundColor:"#005696"},onClick:function(){e.setState({loading:!0}),E()}},"Get student")))))}}]),t}(s.Component)}}]);
//# sourceMappingURL=24.d7a4a0ee.chunk.js.map